(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var r=e.g.document;if(!t&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(t=r.currentScript.src),!t)){var i=r.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=i[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"1bd18fab28aab2ae0e3a.svg",r=e.p+"8ad2ec847ec84b681019.svg",i=e.p+"75233467aeefa2ac446b.svg",a=e.p+"32a7829504b1f875df3b.svg";function n(e){let t=null,r=!1;return{setShip:e=>{t=e},getShip:()=>t,removeShip:()=>{const e=t;return t=null,e},hitCell:()=>{r=!0},isCellHit:()=>r,resetHit:()=>{r=!1},getCoordinate:()=>e}}function o(e){const t=[],r=["j","i","h","g","f","e","d","c","b","a"],i=[0,1,2,3,4,5,6,7,8,9],a=[];let o;for(let e=0;e<r.length;e++)for(let a=0;a<i.length;a++)t.push(n(`${r[e]}${i[a]}`));const d=e=>t.findIndex(t=>t.getCoordinate()===e),l=e=>{const t=u(e),r=t.findIndex(e=>"left"===e.dir),i=t.findIndex(e=>"top"===e.dir),a=t.findIndex(e=>"bottom"===e.dir),n=t.findIndex(e=>"right"===e.dir),o=t.map(e=>e.coordinateIndex);if(-1!==r){if(-1!==i){const e=t[i].coordinateIndex-1;o.push(e)}if(-1!==a){const e=t[a].coordinateIndex-1;o.push(e)}}if(-1!==n){if(-1!==i){const e=t[i].coordinateIndex+1;o.push(e)}if(-1!==a){const e=t[a].coordinateIndex+1;o.push(e)}}return o},c=(r,i)=>{if(r.id!==e)return;const a=function(e,t){let r=0,i="xAxis";return{hit:()=>{r++},getHit:()=>r,reset:()=>{r=0,i="xAxis"},isSunk:()=>r===e,len:()=>e,getAxis:()=>i,switchAxis:()=>{i="xAxis"===i?"yAxis":"xAxis"},getCoordinate:()=>t}}(r.len,i),n=a.len();let c=d(i);if(!p(c,c+n-1))return;let s=0,h=c;for(;s<n;){if(t[h].getShip()||l(h).some(e=>t[e].getShip()))return;s++,h++}for(s=0,h=c;s<n;)t[h].setShip(a),s++,h++;return o=i,!0},s=e=>{const r=d(e),i=t[r].getShip();if(!i)return;const a=i.len();i.switchAxis();const n=i.getAxis();if(!h(r+10*(a-1)))return;let o=0,c=r,s=r;const p=()=>{o=0,c=r,s=r},u=[];for(;o<a;){const e=t[c];u.push({ship:e.removeShip(),oldIndex:c}),o++,"xAxis"===n?c+=10:c++}for(p();o<a;){if(t[s].getShip()||l(s).some(e=>t[e].getShip()))return void u.forEach(e=>{t[e.oldIndex].setShip(e.ship)});o++,"xAxis"===n?s++:s+=10}return p(),u.forEach((e,r)=>{0===r?s=e.oldIndex:"xAxis"===n?s++:s+=10,t[s].setShip(e.ship)}),!0},p=(e,r)=>{if(!(r>=100))return t[e].getCoordinate()[0]===t[r].getCoordinate()[0]},h=e=>e<100,u=e=>{const r=Number.isInteger(e)?e:d(e),i=r-1,a=r-10,n=r+1,o=r+10;return[{coordinateIndex:i,dir:"left",isValid:i>=0&&+t[i].getCoordinate()[1]<+t[r].getCoordinate()[1]},{coordinateIndex:a,dir:"top",isValid:a>=0},{coordinateIndex:n,dir:"right",isValid:p(r,n)},{coordinateIndex:o,dir:"bottom",isValid:h(o)}].filter(e=>e.isValid).filter(e=>!m()[e.coordinateIndex].isCellHit()).map(e=>(e.axis="top"===e.dir||"bottom"===e.dir?"yAxis":"xAxis",e.coordinate=S(e.coordinateIndex),e))},g=()=>[...new Set(t.filter(e=>e.getShip()).map(e=>e.getShip()))],f=()=>g().map(e=>e.getCoordinate()),m=()=>t,y=()=>t.map(e=>e.getCoordinate()),S=e=>t[e].getCoordinate(),x=()=>{t.forEach(e=>{const t=e.getShip();t&&t.reset(),e.resetHit()})};return{setShip:c,getShip:e=>t[d(e)].getShip(),switchShipAxis:s,receiveAttack:e=>{const r=d(e),i=t[r];if(i){if(!i.isCellHit()){a.push(e),i.hitCell();const t=i.getShip();return t?(t.hit(),"hit"):"miss"}return!1}},getHitCellCoordinate:()=>t.filter(e=>e.isCellHit()).map(e=>e.getCoordinate()),setShipDynamically:()=>{const e=[4,3,3,2,2,2,1,1,1,1],t=y(),r=e=>{const r=Math.floor(Math.random()*t.length);return c({len:e,id:"computer"},t[r])};for(;e.length;){const t=e.shift();for(;!r(t););}f().slice(2).forEach(e=>{s(e)})},isAllShipSunk:()=>t.filter(e=>e.getShip()).every(e=>e.getShip().isSunk()),getCoordinate:S,getBoard:m,getAllCoordinate:y,getHitCoordinate:()=>o,getCoordinateIndex:d,getCellInOrderOfHit:()=>a,getValidAdjacentIndex:e=>u(e).map(e=>e.coordinateIndex),getValidAdjacentCoordinateInObj:u,getCoordinateOfShip:f,isAllShipSet:()=>20===g().reduce((e,t)=>e+t.len(),0),getID:()=>e,reset:()=>{x(),t.forEach(e=>{e&&e.removeShip()})},playAgain:x}}const d=document.querySelector("[data-play]"),l=document.querySelector("[data-reset]"),c=document.querySelector("[data-play-again]"),s=document.querySelector("[data-winner-name]"),p=document.querySelector("[data-toggle-player-one-ship]"),h=document.querySelector("[data-toggle-player-two-ship]"),u=document.querySelector("[data-player-one-msg]"),g=document.querySelector("[data-player-two-msg]"),f=document.querySelector("[data-player1Name]"),m=document.querySelector("[data-player2Name]"),y=document.querySelector('[data-player-board="one"]'),S=document.querySelector('[data-player-board="two"]'),x=document.querySelectorAll("[data-player-board]"),b=document.querySelector("[data-select_computer_or_player2]"),A=document.querySelector('[data-select-ship-board="playerOne"]'),v=document.querySelector('[data-select-ship-board="playerTwo"]'),C=document.querySelectorAll("[data-select-ship-board]"),I=document.createElement("img"),E=document.createElement("img"),k={board:o(crypto.randomUUID())},w={board:o(crypto.randomUUID())},L={board:o("computer")},N=k.board.getID(),q=w.board.getID();y.id=N,S.id=q,C.forEach(e=>{(e=>{e.style.minWidth="240px",e.style.minHeight="240px"})(e),(e=>{let t=0;for(;t<100;){const r=document.createElement("div");r.classList.add("select-ship-cell"),e.append(r),t++}})(e)});const T=[{len:4,ind:0,ship:t},{len:3,ind:20,ship:t},{len:3,ind:26,ship:t},{len:2,ind:40,ship:r},{len:2,ind:43,ship:r},{len:2,ind:46,ship:r},{len:1,ind:60,ship:r},{len:1,ind:63,ship:r},{len:1,ind:66,ship:r},{len:1,ind:69,ship:r}],P=(e,t)=>{T.forEach(r=>{const i=document.createElement("img").cloneNode(!0),a=[...e.children][r.ind];i.classList.add("shipImg"),i.setAttribute("data-len",r.len),i.setAttribute("data-img","ship"),i.style.minWidth=24*r.len+"px",i.src=r.ship,i.id=t,a.append(i)})};function O(e){e.querySelectorAll("[data-img]").forEach(e=>e.classList.toggle("visibilityHidden"))}const H=function(){let e=null;return{selectShip:function(t){t.stopPropagation();const r=t.target;r.dataset.len&&(e=r)},getSelectedShip:()=>e,unselectShip:()=>{e=null}}}();function B(){"computer"===document.querySelector("[data-inp-check-player]:checked").id?v.classList.add("hide"):v.classList.remove("hide"),G.reset()}const D=e=>{const t=e.querySelector("[data-len]");t&&t.remove()},$=e=>{const t=e.querySelector("[data-hit-status]");t&&t.remove()},M=()=>{[...[...C][1].children].forEach(D),P(v,q)},j=()=>{x.forEach(e=>{[...e.children].forEach($)})},V=e=>e.querySelector("[data-len]"),U=e=>{e.querySelector("[data-len]").classList.add("pointerEventNone")},W=e=>{e.classList.remove("scaleTo0"),setTimeout(()=>e.classList.add("scaleTo0"),2e3)},_=e=>{u.textContent=e,W(u)},F=e=>{g.textContent=e,W(g)},z=e=>{s.textContent=`${e} turn`},G=function(){let e,t,r,i;const a={playerOne:k.board,playerOneName:"Player 1"},n={attackShip(e,i){if(e.closest("[data-player-board]").id===N)return;let a=t.humanTurn(i);if(a){if(l(e,a),"miss"===a){if(z(t.getPlayerTwoName()),"allSunk"===t.computerTurn(!1,"randomIndex",c))return void(r=t.getPlayerTwoName())}else if(L.board.isAllShipSunk())return void(r=t.getPlayerOneName())}else _("Already hit")},playAgain(){L.board.playAgain()},reset(){L.board.reset()}},o={attackShip(e,i){const a=e.closest("[data-player-board]").id,n=t.getCurrentBoardID();if(a!==n)return;const o=t.getCurrentBoardToAttack(),d=o.receiveAttack(i);d?(l(e,d),"miss"===d?(t.switchBoardID(),t.switchBoard(),t.switchPlayerName(),z(t.getCurPlayerName())):o.isAllShipSunk()&&(r=t.getCurPlayerName())):N===n?_("Already hit"):F("Already hit")},playAgain(){w.board.playAgain()},reset(){w.board.reset(),[...S.children].forEach(D),M()}},d=()=>{r=!1,i=!1,s.innerHTML="ðŸŽ¯",j()},l=(e,t)=>{const r=document.createElement("div");r.classList.add("attackCellStatus"),r.setAttribute("data-hit-status",""),r.innerHTML="hit"===t?"ðŸ’¥":"âŒ",e.append(r)},c=(e,r)=>{const i=y.querySelector(`[data-coordinate="${e}"]`);"miss"===r&&z(t.getPlayerOneName()),l(i,r)};return{setShip:function(e){if(i)return;const t=e.target,r=e.target,a="one"===t.closest("[data-player-board]").dataset.playerBoard?k.board:w.board;let n=t.dataset.coordinate;if(r.dataset.len)n=r.closest("[data-coordinate]").getAttribute("data-coordinate"),a.switchShipAxis(n)&&r.classList.toggle("rotate");else if(n){const e=H.getSelectedShip();if(!e)return;const r=e.id,i=+e.getAttribute("data-len");if(a.setShip({id:r,len:i},n)){const r=getComputedStyle(y).width;e.style.minWidth=+r.replace(/[a-z]/gi,"")/10*i+"px",t.append(e)}else r===N?_("Invalid Position"):F("Invalid Position")}},start:function(){if(i)return;[f,m].forEach(e=>e.readOnly=!0);const r=document.querySelector("[data-inp-check-player]:checked");if(a.playerOneName=""!==f.value.trim()?f.value:"Player 1",a.playerTwoName=""!==m.value.trim()?m.value:"Player 2","computer"===r.id){if(e=n,a.playerTwo=L.board,!k.board.isAllShipSet())return void _(`${a.playerOneName} set all your Ship`);L.board.setShipDynamically(),S.innerHTML="",L.board.getBoard().forEach(e=>{const t=document.createElement("div");t.setAttribute("data-coordinate",e.getCoordinate()),t.classList.add("player-board-cell"),e.getShip()&&t.setAttribute("data-len",`${e.getShip().len()}`),S.append(t)})}else{if(e=o,a.playerTwo=w.board,!k.board.isAllShipSet())return void _(`${a.playerOneName} set all your Ship`);if(!w.board.isAllShipSet())return void F(`${a.playerTwoName} set all your Ship`);[...S.children].filter(V).forEach(U)}t=function({playerOne:e,playerOneName:t,playerTwo:r,playerTwoName:i}){const a=[],n=r.getAllCoordinate(),o=e.getID(),d=r.getID();let l=d,c=r,s=t;const p=(t,r="randomIndex",i)=>{let o=t;if(a.length>0){const e=a[0],t={predictableIndex:()=>e.length-1,randomIndex:()=>Math.floor(Math.random()*e.length)};o=e.splice(t[r](),1)[0]}else if(!t){const t=Math.floor(Math.random()*n.length),r=n[t].toString();o={coordinate:r,coordinateIndex:e.getCoordinateIndex(r)}}return((t,r,i)=>{let o="hit"===e.receiveAttack(t.coordinate);const d=o?"hit":"miss";if(i(t.coordinate,d),n.splice(n.indexOf(t.coordinate),1),o){const n=a.shift(),o=e.getBoard()[t.coordinateIndex].getShip(),d=o.getHit(),l=o.len();if(2===d&&l>2){const e=n.filter(e=>e.axis===t.axis);e.length&&a.unshift(e)}else n&&n.length&&a.unshift(n);const c=e.getValidAdjacentCoordinateInObj(t.coordinateIndex);if(d>1&&d<l){const e=c.filter(e=>e.axis===t.axis);e.length&&a.unshift(e)}else c.length&&a.unshift(c);if(e.isAllShipSunk())return"allSunk";if(p(!1,r,i))return"allSunk"}else a[0]&&0===a[0].length&&a.shift()})(o,r,i)};return{humanTurn:e=>r.receiveAttack(e),computerTurn:p,switchPlayerName:()=>{s=s===t?i:t},switchBoard:()=>{c=c===r?e:r},switchBoardID:()=>{l=l===d?o:d},getCurrentBoardToAttack:()=>c,getCurPlayerName:()=>s,getCurrentBoardID:()=>l,getPlayerOneName:()=>t,getPlayerTwoName:()=>i}}(a),[...y.children].filter(V).forEach(U),z(t.getPlayerOneName()),i=!0},playAgain:function(){e&&(i=!0,e.playAgain(),k.board.playAgain(),j(),s.textContent="Game Ongoing",d())},reset:function(){e?(e.reset(),k.board.reset(),j(),[...y.children].forEach(D),[...[...C][0].children].forEach(D),P(A,N),[f,m].forEach(e=>e.readOnly=!1),d()):s.textContent="Not Played"},attackShip:function(t){if(!i||!e)return;let a=t.target;const n=a.dataset.coordinate;e.attackShip(a,n),(e=>{e&&(s.textContent=`${e} won`,i=!1)})(r)}}}();P(A,N),P(v,q),(()=>{const e=document.body;I.classList.add("pirateShip"),E.classList.add("sailingShip"),I.src=i,E.src=a,e.append(I,E)})(),k.board.getAllCoordinate().forEach(e=>{const t=document.createElement("div");t.classList.add("player-board-cell"),x.forEach(r=>{const i=t.cloneNode(!0);i.setAttribute("data-coordinate",e),r.append(i)})}),B(),b.addEventListener("change",function(e){const t=e.target.dataset.inpCheckPlayer;t&&("computer"===t&&(M(),[...S.children].forEach(D)),B())}),d.addEventListener("click",G.start),l.addEventListener("click",G.reset),c.addEventListener("click",G.playAgain),A.addEventListener("click",H.selectShip),v.addEventListener("click",H.selectShip),y.addEventListener("click",G.setShip),S.addEventListener("click",G.setShip),y.addEventListener("click",G.attackShip),S.addEventListener("click",G.attackShip),p.addEventListener("click",function(){k.board.isAllShipSet()?O(y):_("Set all your Ship first")}),h.addEventListener("click",function(){"computer"===document.querySelector("[data-inp-check-player]:checked").id?F("Feature N/A for Computer"):w.board.isAllShipSet()?O(S):F("Set all your Ship first")}),document.addEventListener("click",()=>{H.unselectShip()})})();